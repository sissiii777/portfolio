<!-- Oslo-style Portfolio -->
<link rel="stylesheet" href="portfolio.css">
<div class="oslo-container">
  <!-- Navigation -->
  <nav class="oslo-nav">
    <div class="nav-links">
      <span class="nav-name">郑泳诗</span>
      <a href="Work" class="nav-link">Work</a>
      <a href="About-Me" class="nav-link">About Me</a>
  </div>
  </nav>

  <!-- Main Content -->
  <main class="oslo-main">
    <!-- Hero Section -->
    <section class="hero-section">
      <p class="hero-intro">我擅长用前沿技术提升用户体验，作品主要围绕<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;数据化设计 · AI驱动设计 · 软硬件交互系统 等。</p>
      <h1 class="hero-title" id="decrypted-text">Sissi's Works</h1>
      <div class="hero-footer">
        <p class="hero-subtitle"></p>
        <p class="scroll-indicator"></p>
      </div>
      
      <!-- Phone-shaped card -->
      <div class="phone-card" data-tilt>
        <div class="phone-spectra-noise"></div>
        <div class="phone-card-inner">
          <div class="phone-notch"></div>
          <div class="phone-inner-glow"></div>
          <div class="phone-glare"></div>
        </div>
        <div class="phone-border-beam"></div>
        <!-- Code Editor Animation (shown on hover) -->
        <div class="code-editor-container">
          <div class="code-editor">
            <!-- Terminal Header -->
            <div class="terminal-header">
              <div class="terminal-title">
                <svg class="terminal-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="4 17 10 11 4 5"></polyline>
                  <line x1="12" y1="19" x2="20" y2="19"></line>
                </svg>
                <span>Terminal</span>
              </div>
            </div>
            <!-- Code Line 1 -->
            <div class="code-line"><span class="code-keyword">const</span><span class="code-variable"> 毕业于</span><span class="code-operator"> = </span><span class="code-string">"</span><span class="code-typing"></span><span class="code-cursor">|</span><span class="code-string">"</span><span class="code-punctuation">;</span></div>
            <!-- Code Line 2 -->
            <div class="code-line code-line-2"><span class="code-keyword">const</span><span class="code-variable"> 我有</span><span class="code-operator"> = </span><span class="code-bracket">[</span></div>
            <div class="code-line code-line-2"><span class="code-indent">  </span><span class="code-string">"技术背景+设计能力"</span><span class="code-punctuation">,</span></div>
            <div class="code-line code-line-2"><span class="code-indent">  </span><span class="code-string">"系统性思考"</span><span class="code-punctuation">,</span></div>
            <div class="code-line code-line-2"><span class="code-indent">  </span><span class="code-string">"共情、洞悉"</span></div>
            <div class="code-line code-line-2"><span class="code-bracket">]</span><span class="code-punctuation">;</span></div>
          </div>
        </div>
        
        <!-- Tech Bubbles (shown on hover) -->
        <div class="tech-bubbles-container">
          <!-- White Bubble -->
          <div class="tech-bubble white-bubble">
            <div class="bubble-content">
              <img src="bubble1.png" alt="AI" class="bubble-icon">
              <div class="bubble-text">
                <span class="bubble-tag">人工智能业</span>
              </div>
            </div>
          </div>
          
          <!-- Black Bubble -->
          <div class="tech-bubble black-bubble">
            <div class="bubble-content">
              <img src="bubble2.png" alt="Manufacturing" class="bubble-icon">
              <div class="bubble-text">
                <span class="bubble-tag">智能制造业</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>

    <!-- Projects Grid -->
    <section class="projects-section">
      <div class="projects-grid">
        <!-- Project 1 -->
        <div class="project-card">
          <a href="Clinical-AR" rel="history" class="project-link">
            <div class="project-border-beam"></div>
            <div class="project-image">
              <img src="project1.png" alt="">
            </div>
            <div class="project-title-top">手势识别导航系统</div>
            <div class="project-title">Clinical AR</div>
          </a>
        </div>

        <!-- Project 2 -->
        <div class="project-card">
          <a href="CITIBOT" rel="history" class="project-link">
            <div class="project-border-beam"></div>
            <div class="project-image">
              <img src="project2.png" alt="">
            </div>
            <div class="project-title-top">AI语音交互</div>
            <div class="project-title">CITIBOT</div>
          </a>
        </div>

        <!-- Project 3 -->
        <div class="project-card">
          <a href="EGG" rel="history" class="project-link">
            <div class="project-border-beam"></div>
            <div class="project-image">
              <img src="project3.png" alt="">
            </div>
            <div class="project-title-top">生物数据可穿戴</div>
            <div class="project-title">DreamSync</div>
          </a>
        </div>

        <!-- Project 4 -->
        <div class="project-card">
          <a href="LLM" rel="history" class="project-link">
            <div class="project-border-beam"></div>
            <div class="project-image">
              <img src="{image 24}" alt="">
            </div>
            <div class="project-title-top">语言模型摄像交互</div>
            <div class="project-title">Sugar Demon</div>
          </a>
        </div>
  </div>
    </section>

    <!-- About Section -->
    <section class="about-section">
      <p class="about-text">TBF.</p>
    </section>
  </main>
</div>

<!-- CSS moved to portfolio.css -->

<!-- Oslo Animation Script -->
<script>
document.addEventListener('DOMContentLoaded', function () {
  // Smooth scroll animation for project cards
  const projectCards = document.querySelectorAll('.project-card');

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
        }
      });
    }, {
      threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  });

  // Initialize cards with hidden state
  projectCards.forEach(card => {
    card.style.opacity = '0';
    card.style.transform = 'translateY(30px)';
    card.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
    observer.observe(card);
  });

  // Smooth scroll for navigation links
  document.querySelectorAll('.nav-link').forEach(link => {
    link.addEventListener('click', function(e) {
      // Add smooth scrolling behavior if needed
      this.style.transition = 'opacity 0.3s ease';
    });
  });

  // Decrypted text effect
  function initDecryptedText() {
    const textElement = document.getElementById('decrypted-text');
    if (!textElement) return;
    
    const originalText = "Sissi's Works";
    const chars = originalText.split('');
    
    // Wrap each character in a span
    textElement.innerHTML = chars.map(char => 
      `<span class="char">${char}</span>`
    ).join('');
    
    const charElements = textElement.querySelectorAll('.char');
    const scrambleChars = '!@#$%^&*()_+-=[]{}|;:,.<>?~`';
    
    function scrambleRandomChars() {
      // Pick 2-4 random characters from the middle section
      const start = Math.floor(chars.length * 0.2);
      const end = Math.floor(chars.length * 0.8);
      const numToScramble = Math.floor(Math.random() * 3) + 2; // 2-4 chars
      
      const indices = [];
      while (indices.length < numToScramble) {
        const index = Math.floor(Math.random() * (end - start)) + start;
        if (!indices.includes(index)) {
          indices.push(index);
        }
      }
      
      // Scramble the selected characters
      indices.forEach(index => {
        const charElement = charElements[index];
        if (charElement && charElement.textContent !== ' ') {
          charElement.classList.add('scrambling');
          charElement.textContent = scrambleChars[Math.floor(Math.random() * scrambleChars.length)];
          
          setTimeout(() => {
            charElement.classList.remove('scrambling');
            charElement.textContent = chars[index];
          }, 60);
        }
      });
    }
    
    // Start scrambling 4 times
    let iterations = 0;
    const maxIterations = 4;
    
    function runScrambleIteration() {
      if (iterations < maxIterations) {
        scrambleRandomChars();
        iterations++;
        setTimeout(runScrambleIteration, 300); // 300ms delay between iterations
      }
    }
    
    runScrambleIteration();
  }
  
  // Initialize decrypted text effect
  initDecryptedText();

  // Tilt effect and border beam for phone card
  const phoneCard = document.querySelector('.phone-card');
  const borderBeam = document.querySelector('.phone-border-beam');
  
  if (phoneCard && borderBeam) {
    phoneCard.addEventListener('mousemove', function(e) {
      const rect = this.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      
      const centerX = rect.width / 2;
      const centerY = rect.height / 2;
      
      // Tilt effect
      const rotateX = (y - centerY) / 15;
      const rotateY = (centerX - x) / 15;
      this.style.transform = `translate(-50%, -50%) perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-15px) scale(1.05)`;
      
      // Border beam effect - calculate angle from mouse position
      const angle = Math.atan2(y - centerY, x - centerX) * (180 / Math.PI);
      const normalizedAngle = (angle + 360) % 360;
      
      // Create gradient that follows mouse with larger spread - closer to mouse and wider range
      borderBeam.style.background = `conic-gradient(from ${normalizedAngle - 50}deg at 50% 50%,
        transparent 0deg,
        rgba(255, 255, 255, 0) 15deg,
        rgba(255, 255, 255, 0.7) 35deg,
        rgba(255, 255, 255, 1) 40deg,
        rgba(255, 255, 255, 1) 60deg,
        rgba(255, 255, 255, 0.7) 65deg,
        rgba(255, 255, 255, 0) 85deg,
        transparent 100deg,
        transparent 360deg)`;
    });
    
    phoneCard.addEventListener('mouseleave', function() {
      this.style.transform = 'translate(-50%, -50%) perspective(1000px) rotateY(-25deg) rotateX(8deg) translateY(0) scale(1)';
    });
  }
  
  // Scroll animation for phone card transformation
  function initScrollAnimation() {
    const phoneCard = document.querySelector('.phone-card');
    const projectSection = document.querySelector('.projects-section');
    const projectCards = document.querySelectorAll('.projects-grid .project-card');
    const firstProjectCard = projectCards[0];
    
    if (!phoneCard || !projectSection || projectCards.length === 0) return;
    
    let lastScrollTime = 0;
    const throttleDelay = 16; // ~60fps
    
    // Throttled scroll handler for better performance
    function handleScroll() {
      const now = Date.now();
      if (now - lastScrollTime < throttleDelay) return;
      lastScrollTime = now;
      
      const scrollY = window.scrollY;
      const windowHeight = window.innerHeight;
      const phoneCardRect = phoneCard.getBoundingClientRect();
      const projectSectionRect = projectSection.getBoundingClientRect();
      const firstCardRect = firstProjectCard.getBoundingClientRect();
      
      // Calculate scroll progress based on distance to project section
      const distanceToProject = projectSectionRect.top - windowHeight * 0.5;
      const scrollProgress = Math.max(0, Math.min(1, 1 - (distanceToProject / windowHeight)));
      
      if (scrollProgress > 0 && scrollProgress <= 1) {
        // Get initial phone card position (center of viewport)
        const initialX = window.innerWidth / 2;
        const initialY = windowHeight / 2;
        
        // Get target position (first project card center)
        const targetX = firstCardRect.left + firstCardRect.width / 2;
        const targetY = firstCardRect.top + firstCardRect.height / 2;
        
        // Calculate the distance to move
        const deltaX = targetX - initialX;
        const deltaY = targetY - initialY;
        
        // Apply movement with scroll progress
        const moveX = deltaX * scrollProgress;
        const moveY = deltaY * scrollProgress;
        
        // Rotation progress
        const rotateZ = scrollProgress * 90; // 0 to 90 degrees
        const rotateY = -25 + scrollProgress * 25; // -25 to 0
        const rotateX = 8 - scrollProgress * 8; // 8 to 0
        
        phoneCard.style.transform = `
          translate(-50%, -50%)
          translate(${moveX}px, ${moveY}px)
          perspective(1000px) 
          rotateY(${rotateY}deg) 
          rotateX(${rotateX}deg) 
          rotateZ(${rotateZ}deg)
        `;
        
        phoneCard.style.left = '50%';
        phoneCard.style.top = '50%';
        
        // Transition opacity
        if (scrollProgress > 0.7) {
          const fadeProgress = (scrollProgress - 0.7) / 0.3;
          phoneCard.style.opacity = 1 - fadeProgress;
          
          // Show first project card at the same position
          firstProjectCard.style.opacity = fadeProgress;
          firstProjectCard.style.transform = 'translateY(0)';
          
          // Show other project cards below
          projectCards.forEach((card, index) => {
            if (index > 0) {
              card.style.opacity = fadeProgress;
              card.style.transform = `translateY(${(1 - fadeProgress) * 30}px)`;
            }
          });
        } else {
          phoneCard.style.opacity = 1;
          projectCards.forEach(card => {
            card.style.opacity = 0;
            card.style.transform = 'translateY(50px)';
          });
        }
        
      } else if (scrollY < 100) {
        // Reset to initial state
        phoneCard.style.opacity = '1';
        phoneCard.style.left = '50%';
        phoneCard.style.top = '50%';
        phoneCard.style.transform = 'translate(-50%, -50%) perspective(1000px) rotateY(-25deg) rotateX(8deg)';
        projectCards.forEach(card => {
          card.style.opacity = '0';
          card.style.transform = 'translateY(50px)';
        });
      } else {
        // Fully scrolled - show project cards
        phoneCard.style.opacity = '0';
        projectCards.forEach(card => {
          card.style.opacity = '1';
          card.style.transform = 'translateY(0)';
        });
      }
    }
    
    window.addEventListener('scroll', handleScroll, { passive: true });
    
    // Initial state - hide project cards
    projectCards.forEach(card => {
      card.style.transition = 'all 0.6s cubic-bezier(0.23, 1, 0.320, 1)';
      card.style.opacity = '0';
      card.style.transform = 'translateY(50px)';
    });
  }
  
  initScrollAnimation();
  
  // Code typing animation
  function initCodeTyping() {
    const typingElement = document.querySelector('.code-typing');
    const phoneCard = document.querySelector('.phone-card');
    
    if (!typingElement || !phoneCard) return;
    
    const textToType = "康奈尔大学，纽约大学";
    let currentIndex = 0;
    let isTyping = false;
    let typingInterval;
    
    function typeText() {
      if (currentIndex < textToType.length) {
        typingElement.textContent = textToType.substring(0, currentIndex + 1);
        currentIndex++;
      } else {
        // Reset after finishing
        setTimeout(() => {
          currentIndex = 0;
          typingElement.textContent = '';
        }, 2000);
      }
    }
    
    phoneCard.addEventListener('mouseenter', function() {
      if (!isTyping) {
        isTyping = true;
        currentIndex = 0;
        typingElement.textContent = '';
        typingInterval = setInterval(typeText, 100);
      }
    });
    
    phoneCard.addEventListener('mouseleave', function() {
      if (isTyping) {
        isTyping = false;
        clearInterval(typingInterval);
        currentIndex = 0;
        typingElement.textContent = '';
      }
    });
  }
  
  initCodeTyping();
  
  // Project card beam effect
  function initProjectBeam() {
    const projectLinks = document.querySelectorAll('.project-link');
    
    projectLinks.forEach(link => {
      const borderBeam = link.querySelector('.project-border-beam');
      
      if (borderBeam) {
        link.addEventListener('mousemove', function(e) {
          const rect = this.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          
          const centerX = rect.width / 2;
          const centerY = rect.height / 2;
          
          // Calculate angle from mouse position
          const angle = Math.atan2(y - centerY, x - centerX) * (180 / Math.PI);
          const normalizedAngle = (angle + 360) % 360;
          
          // Create gradient that follows mouse with gradient fade effect
          borderBeam.style.background = `conic-gradient(from ${normalizedAngle - 50}deg at 50% 50%,
            transparent 0deg,
            rgba(2, 13, 255, 0) 15deg,
            rgba(50, 80, 255, 0.5) 30deg,
            rgba(100, 150, 255, 0.7) 35deg,
            rgba(150, 180, 255, 0.9) 38deg,
            rgba(2, 13, 255, 1) 40deg,
            rgba(2, 13, 255, 1) 60deg,
            rgba(150, 180, 255, 0.9) 62deg,
            rgba(100, 150, 255, 0.7) 65deg,
            rgba(50, 80, 255, 0.5) 70deg,
            rgba(2, 13, 255, 0) 85deg,
            transparent 100deg,
            transparent 360deg)`;
        });
        
        link.addEventListener('mouseleave', function() {
          borderBeam.style.background = 'conic-gradient(from 0deg at 50% 50%, transparent, transparent)';
        });
      }
    });
  }
  
  initProjectBeam();
});
</script>